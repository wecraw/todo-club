type Category @model
  @auth(rules: [
    { allow: owner }, 
    { allow: owner, ownerField: "sharedWith", operations: [update, read] }
  ]) {

  id: ID!
  title: String
  owner: AWSEmail!
  sharedWith: [AWSEmail]
  todolistID: ID! @index(name: "byTodoList")
  Todos: [Todo] @hasMany(indexName: "byCategory", fields: ["id"])
}

type Todo @model
  @auth(rules: [
    { allow: owner }, 
    { allow: owner, ownerField: "sharedWith", operations: [update, read] }
  ]) {

  id: ID!
  description: String!
  category: String
  completed: Boolean
  owner: AWSEmail!
  completedBy: AWSEmail!
  sharedWith: [AWSEmail]
  picture: String
  todolistID: ID! @index(name: "byTodoList")
  categoryID: ID! @index(name: "byCategory")
}

type TodoList @model 
  @auth(rules: [
    { allow: owner }, 
    { allow: owner, ownerField: "sharedWith", operations: [update, read] }
  ]) {
  
  id: ID!
  owner: AWSEmail!
  title: String!
  sharedWith: [AWSEmail]
  Todos: [Todo] @hasMany(indexName: "byTodoList", fields: ["id"])
  Categories: [Category] @hasMany(indexName: "byTodoList", fields: ["id"])
}
